# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Calendar API - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚ö†Ô∏è –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

**–ù–∞ macOS –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3` –≤–º–µ—Å—Ç–æ `python`!**

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
python3 -m pip install -r requirements.txt
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ credentials.json?

`credentials.json` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–∫–∞—á–∏–≤–∞–µ—Ç–µ –∏–∑ Google Cloud Console. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (Client ID –∏ Client Secret), –∫–æ—Ç–æ—Ä–∞—è –Ω—É–∂–Ω–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Google Calendar API.

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:** –≠—Ç–æ "–ø–∞—Å–ø–æ—Ä—Ç" –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π Google –≤—ã–¥–∞–µ—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é.

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [console.cloud.google.com](https://console.cloud.google.com/)
2. –í–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
3. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
4. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Calendar Bot")
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**
6. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)

### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç–µ Google Calendar API

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ –Ω–∞–π–¥–∏—Ç–µ **"APIs & Services"** ‚Üí **"Library"**
2. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ: **"Google Calendar API"**
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Enable"** (–í–∫–ª—é—á–∏—Ç—å)
5. –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OAuth consent screen (–≠–∫—Ä–∞–Ω —Å–æ–≥–ª–∞—Å–∏—è)

–≠—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞:

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **"APIs & Services"** ‚Üí **"OAuth consent screen"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"External"** (–¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è) ‚Üí **"Create"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **App name:** Calendar Bot (–∏–ª–∏ –ª—é–±–æ–µ –∏–º—è)
   - **User support email:** –≤–∞—à email
   - **Developer contact information:** –≤–∞—à email
   - –ù–∞–∂–º–∏—Ç–µ **"Save and Continue"**
4. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **"Scopes"**:
   - –ù–∞–∂–º–∏—Ç–µ **"Add or Remove Scopes"**
   - –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ: `https://www.googleapis.com/auth/calendar`
   - –ù–∞–∂–º–∏—Ç–µ **"Update"** ‚Üí **"Save and Continue"**
5. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **"Test users"**:
   - –ù–∞–∂–º–∏—Ç–µ **"Add Users"**
   - –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à email (—Ç–æ—Ç, –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø)
   - –ù–∞–∂–º–∏—Ç–µ **"Save and Continue"**
6. –ù–∞–∂–º–∏—Ç–µ **"Back to Dashboard"**

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ OAuth 2.0 Client ID

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **"APIs & Services"** ‚Üí **"Credentials"**
2. –ù–∞–∂–º–∏—Ç–µ **"+ CREATE CREDENTIALS"** (–≤–≤–µ—Ä—Ö—É)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"OAuth client ID"**
4. –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–∏—è ‚Äî –Ω–∞–∂–º–∏—Ç–µ **"Configure Consent Screen"** –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É (—Å–º. –®–∞–≥ 3)
5. –í —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞:
   - **Application type:** –≤—ã–±–µ—Ä–∏—Ç–µ **"Desktop app"**
   - **Name:** Calendar Bot Client (–∏–ª–∏ –ª—é–±–æ–µ –∏–º—è)
   - –ù–∞–∂–º–∏—Ç–µ **"Create"**
6. **–í–ê–ñ–ù–û:** –ü–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª–∏–µ–Ω—Ç–µ
   - **–ù–ï –ó–ê–ö–†–´–í–ê–ô–¢–ï –ï–ì–û –ü–û–ö–ê!**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"DOWNLOAD JSON"** (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
   - –§–∞–π–ª —Å–∫–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ `client_secret_XXXXX.json` –∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ –∏–º—è
7. **–ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª –≤ `credentials.json`**
8. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ `credentials.json` –≤ –ø–∞–ø–∫—É —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º (—Ç—É–¥–∞ –∂–µ, –≥–¥–µ `get_google_token.py`)

### –®–∞–≥ 4.5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redirect URIs (–í–ê–ñ–ù–û!)

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É `redirect_uri_mismatch`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"APIs & Services"** ‚Üí **"Credentials"**
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à OAuth 2.0 Client ID (—Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–ª–∏)
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–∞—Ä–∞–Ω–¥–∞—à) —Å–ø—Ä–∞–≤–∞ –æ—Ç –Ω–µ–≥–æ
4. –í —Ä–∞–∑–¥–µ–ª–µ **"Authorized redirect URIs"** –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ URI:
   ```
   http://localhost:8080/
   http://localhost:8080
   http://localhost/
   http://127.0.0.1:8080/
   http://127.0.0.1:8080
   http://127.0.0.1/
   ```
5. –ù–∞–∂–º–∏—Ç–µ **"Save"**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Google –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `http://localhost`, –Ω–æ —Å–∫—Ä–∏–ø—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç, –ø–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.

### –®–∞–≥ 5: –ü–æ–ª—É—á–∏—Ç–µ Refresh Token

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –≤–∞—Å –µ—Å—Ç—å `credentials.json`, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
python3 get_google_token.py
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞ macOS –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3` –≤–º–µ—Å—Ç–æ `python`

–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:
1. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä
2. –í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à Google –∞–∫–∫–∞—É–Ω—Ç (—Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –¥–æ–±–∞–≤–∏–ª–∏ –∫–∞–∫ Test User)
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é
4. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ—è–≤—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞:

```
GOOGLE_CLIENT_ID=–≤–∞—à_client_id
GOOGLE_CLIENT_SECRET=–≤–∞—à_client_secret
GOOGLE_REFRESH_TOKEN=–≤–∞—à_refresh_token
```

5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

### –®–∞–≥ 6: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤:
- **–õ–æ–∫–∞–ª—å–Ω–æ:** —Ñ–∞–π–ª `.env`
- **–ù–∞ Render:** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞

## üìÅ –ì–¥–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å credentials.json?

```
–≤–∞—à-–ø—Ä–æ–µ–∫—Ç/
‚îú‚îÄ‚îÄ credentials.json    ‚Üê –ó–¥–µ—Å—å!
‚îú‚îÄ‚îÄ get_google_token.py
‚îú‚îÄ‚îÄ bot.py
‚îî‚îÄ‚îÄ ...
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ credentials.json –≤ git!** –û–Ω —É–∂–µ –≤ `.gitignore`
2. **–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è refresh token** —Ñ–∞–π–ª `credentials.json` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (–æ–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
3. **Refresh token** ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å. –û–Ω –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç access token)
4. –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ refresh token ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `get_google_token.py` —Å–Ω–æ–≤–∞

## üîç –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç credentials.json?

–§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–ù–ï –∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –ø–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π!):

```json
{
  "installed": {
    "client_id": "–≤–∞—à-client-id.apps.googleusercontent.com",
    "project_id": "–≤–∞—à-project-id",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_secret": "–≤–∞—à-client-secret",
    "redirect_uris": ["http://localhost"]
  }
}
```

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–Ω–µ –Ω—É–∂–µ–Ω credentials.json –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞?**  
A: –ù–µ—Ç! –û–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è refresh token. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ –º–æ–≥—É —Å–∫–∞—á–∞—Ç—å JSON?**  
A: –í –æ–∫–Ω–µ —Å Client ID –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (—Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑) —Å–ø—Ä–∞–≤–∞ –æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª–∏–µ–Ω—Ç–µ.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω credentials.json –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–æ—Ç–æ–≤?**  
A: –î–∞, –Ω–æ –ª—É—á—à–µ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π Client ID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

**Q: Refresh token –∏—Å—Ç–µ–∫, —á—Ç–æ –¥–µ–ª–∞—Ç—å?**  
A: –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python3 get_google_token.py` —Å–Ω–æ–≤–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π.

**Q: –û—à–∏–±–∫–∞ "cannot execute binary file" –∏–ª–∏ "command not found"?**  
A: –ù–∞ macOS –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3` –≤–º–µ—Å—Ç–æ `python`. –¢–∞–∫–∂–µ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `python3 -m pip install -r requirements.txt`

**Q: –û—à–∏–±–∫–∞ "redirect_uri_mismatch" (Error 400)?**  
A: –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ redirect URI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Google Cloud Console. –°–º. **–®–∞–≥ 4.5** –≤—ã—à–µ. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã `http://localhost` –∏ `http://127.0.0.1` —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏ –≤ —Ä–∞–∑–¥–µ–ª "Authorized redirect URIs" –≤–∞—à–µ–≥–æ OAuth Client ID.



